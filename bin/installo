#!/usr/bin/env python3
import argparse

from cenai_core import (cenai_path, extern_exec)

def get_args() -> argparse.Namespace:
    parser = argparse.ArgumentParser(
        description="install cenai"
    )
    parser.add_argument(
        "target",
        choices=[
            "list",
            "install",
            "clean",
        ],
        nargs="?",
        default="list",
        help="target to do"
    )
    return parser.parse_args()


def main() -> int:
    option = get_args()
    work_dir = cenai_path()

    status = extern_exec(
        f"make -C {work_dir} {option.target}"
    )

    if status:
        exit(-1)


if __name__ == "__main__":
    main()